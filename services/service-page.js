// Extended translations for service pages
window.serviceTranslations = {
    en: {
        nav: {
            home: "Home",
            about: "About us",
            services: "Services", 
            partners: "Our Partners",
            contact: "Contact us"
        },
        networking: {
            title: "Network Solutions",
            subtitle: "Professional network infrastructure design and implementation for modern businesses",
            networks_installed: "Networks Installed",
            uptime: "Uptime",
            support: "Support",
            what_we_do: "What We Offer",
            description: "SubNet Group specializes in designing and implementing robust network infrastructures that meet the unique needs of your business. Our team of certified network engineers ensures your network is secure, scalable, and optimized for performance.",
            feature1: "Custom Network Design",
            feature2: "Enterprise-grade Equipment",
            feature3: "Scalable Solutions",
            feature4: "24/7 Monitoring",
            feature5: "Security Integration",
            feature6: "Performance Optimization",
            our_services: "Our Network Services",
            design_planning: "Network Design & Planning",
            design_desc: "Comprehensive network architecture design tailored to your business requirements and growth plans.",
            installation: "Installation & Configuration",
            installation_desc: "Professional installation of switches, routers, access points, and network infrastructure.",
            wireless: "Wireless Networks",
            wireless_desc: "Enterprise-grade wireless solutions for seamless connectivity throughout your facility.",
            optimization: "Performance Optimization",
            optimization_desc: "Network performance tuning and optimization to ensure maximum efficiency and speed.",
            security: "Network Security",
            security_desc: "Implementation of firewalls, VPNs, and security protocols to protect your network.",
            maintenance: "Maintenance & Support",
            maintenance_desc: "Ongoing maintenance, monitoring, and support to keep your network running smoothly.",
            recent_projects: "Our Network Projects",
            gallery_subtitle: "Take a look at some of our recent network installations and configurations",
            project1_title: "Corporate Office Network",
            project1_desc: "Complete network infrastructure for 200+ employees",
            project2_title: "Hospital Network System",
            project2_desc: "Critical healthcare network with 99.99% uptime",
            project3_title: "Warehouse WiFi Coverage",
            project3_desc: "Wide-area wireless coverage for logistics operations",
            project4_title: "Educational Network",
            project4_desc: "Secure network for 1000+ students and staff",
            project5_title: "Retail POS Network",
            project5_desc: "High-speed network for point-of-sale systems",
            project6_title: "Manufacturing Network",
            project6_desc: "Industrial-grade network for production facility",
            our_process: "Our Implementation Process",
            step1: "Site Assessment",
            step1_desc: "Thorough analysis of your current infrastructure and business requirements",
            step2: "Design & Planning",
            step2_desc: "Custom network design with detailed implementation plans and timelines",
            step3: "Installation",
            step3_desc: "Professional installation with minimal disruption to your operations",
            step4: "Testing & Optimization",
            step4_desc: "Comprehensive testing and performance optimization",
            step5: "Training & Handover",
            step5_desc: "User training and complete documentation handover",
            step6: "Ongoing Support",
            step6_desc: "24/7 monitoring and support to ensure optimal performance",
            ready_to_upgrade: "Ready to Upgrade Your Network?",
            cta_description: "Contact us today for a free consultation and discover how we can improve your network infrastructure."
        },
        cybersecurity: {
            title: "Cybersecurity Services",
            subtitle: "Comprehensive security solutions to protect your digital assets and ensure business continuity",
            what_we_do: "Security Solutions"
        },
        monitoring: {
            title: "System Monitoring",
            subtitle: "24/7 monitoring and maintenance of your IT infrastructure with proactive issue resolution",
            what_we_do: "Monitoring Services"
        },
        support: {
            title: "Technical Support",
            subtitle: "Expert technical support and consultation services with rapid response times and comprehensive solutions",
            what_we_do: "Support Services"
        },
        // Add services object for compatibility with main page translations
        services: {
            networking: {
                title: "Internet & Networking"
            },
            security: {
                title: "Video Surveillance"
            },
            monitoring: {
                title: "Access Control"
            },
            support: {
                title: "Maintenance & Support"
            }
        },
        // Add surveillance translations
        surveillance: {
            recent_projects: "Recent Surveillance Installations"
        },
        // Add access control translations  
        access: {
            recent_projects: "Recent Access Control Installations"
        },
        footer: {
            services: "Services"
        },
        common: {
            view_project: "View Project",
            get_quote: "Get Free Quote",
            call_now: "Call Now"
        }
    },
    he: {
        nav: {
            home: "בית",
            about: "אודותינו",
            services: "שירותים",
            partners: "השותפים שלנו", 
            contact: "צור קשר"
        },
        networking: {
            title: "פתרונות רשת",
            subtitle: "עיצוב והטמעה מקצועית של תשתית רשת לעסקים מודרניים",
            networks_installed: "רשתות שהותקנו",
            uptime: "זמן פעילות",
            support: "תמיכה",
            what_we_do: "מה אנחנו מציעים",
            description: "SubNet Group מתמחה בעיצוב והטמעה של תשתיות רשת חזקות העונות על הצרכים הייחודיים של העסק שלכם. צוות מהנדסי הרשת המוסמכים שלנו מבטיח שהרשת שלכם תהיה מאובטחת, ניתנת להרחבה ומותאמת לביצועים.",
            feature1: "עיצוב רשת מותאם אישית",
            feature2: "ציוד ברמה עסקית",
            feature3: "פתרונות ניתנים להרחבה",
            feature4: "ניטור 24/7",
            feature5: "אינטגרציית אבטחה",
            feature6: "אופטימיזציית ביצועים",
            our_services: "שירותי הרשת שלנו",
            design_planning: "עיצוב ותכנון רשת",
            design_desc: "עיצוב מקיף של ארכיטקטורת רשת המותאם לדרישות ותוכניות הצמיחה של העסק שלכם.",
            installation: "התקנה ותצורה",
            installation_desc: "התקנה מקצועית של מתגים, נתבים, נקודות גישה ותשתית רשת.",
            wireless: "רשתות אלחוטיות",
            wireless_desc: "פתרונות אלחוטיים ברמה עסקית לקישוריות חלקה בכל המתקן שלכם.",
            optimization: "אופטימיזציית ביצועים",
            optimization_desc: "כוונון ואופטימיזציה של ביצועי הרשת להבטחת יעילות ומהירות מקסימלית.",
            security: "אבטחת רשת",
            security_desc: "הטמעת חומות אש, VPN ופרוטוקולי אבטחה להגנה על הרשת שלכם.",
            maintenance: "תחזוקה ותמיכה",
            maintenance_desc: "תחזוקה מתמשכת, ניטור ותמיכה כדי לשמור על הרשת שלכם פועלת בחלקות.",
            recent_projects: "פרויקטי הרשת שלנו",
            gallery_subtitle: "הציצו לכמה מההתקנות והתצורות הרשת האחרונות שלנו",
            project1_title: "רשת משרד תאגידי",
            project1_desc: "תשתית רשת מלאה לכ-200 עובדים",
            project2_title: "מערכת רשת בית חולים",
            project2_desc: "רשת קריטית לשירותי בריאות עם 99.99% זמן פעילות",
            project3_title: "כיסוי WiFi למחסן",
            project3_desc: "כיסוי אלחוטי לאזור נרחב לפעולות לוגיסטיות",
            project4_title: "רשת חינוכית",
            project4_desc: "רשת מאובטחת לכ-1000 תלמידים וצוות",
            project5_title: "רשת קמעונאית לנקודות מכירה",
            project5_desc: "רשת מהירה למערכות נקודות מכירה",
            project6_title: "רשת ייצור",
            project6_desc: "רשת ברמה תעשייתית למתקן ייצור",
            our_process: "תהליך היישום שלנו",
            step1: "הערכת אתר",
            step1_desc: "ניתוח מקיף של התשתית הנוכחית והדרישות העסקיות שלכם",
            step2: "עיצוב ותכנון",
            step2_desc: "עיצוב רשת מותאם אישית עם תוכניות יישום מפורטות ולוחות זמנים",
            step3: "התקנה",
            step3_desc: "התקנה מקצועית עם הפרעה מינימלית לפעילות שלכם",
            step4: "בדיקות ואופטימיזציה",
            step4_desc: "בדיקות מקיפות ואופטימיזציית ביצועים",
            step5: "הדרכה והעברה",
            step5_desc: "הדרכת משתמשים והעברה מלאה של תיעוד",
            step6: "תמיכה מתמשכת",
            step6_desc: "ניטור ותמיכה 24/7 להבטחת ביצועים אופטימליים",
            ready_to_upgrade: "מוכנים לשדרג את הרשת שלכם?",
            cta_description: "צרו קשר היום ליעוץ חינם וגלו איך אנחנו יכולים לשפר את תשתית הרשת שלכם."
        },
        cybersecurity: {
            title: "שירותי אבטחת סייבר",
            subtitle: "פתרונות אבטחה מקיפים להגנה על הנכסים הדיגיטליים שלכם ולהבטחת רציפות עסקית",
            what_we_do: "פתרונות אבטחה",
            description: "הגנו על הבית או העסק שלכם עם מערכות מעקב וידאו מקצועיות הכוללות מצלמות בחדות גבוהה, הקלטה חכמה ויכולות גישה מרחוק.",
            features: "התכונות שלנו",
            feature1: "מעקב 24/7",
            feature2: "גישה מרחוק",
            feature3: "הקלטה באיכות HD",
            feature4: "זיהוי תנועה",
            feature5: "התראות חכמות",
            feature6: "אחסון ענן",
            our_services: "שירותי האבטחה שלנו",
            camera_installation: "התקנת מצלמות",
            camera_installation_desc: "התקנה מקצועית של מצלמות אבטחה באיכות HD עם כיסוי מלא",
            recording_systems: "מערכות הקלטה",
            recording_systems_desc: "מערכות הקלטה דיגיטליות עם יכולות אחסון מקומי וענן",
            remote_monitoring: "ניטור מרחוק",
            remote_monitoring_desc: "צפייה ובקרה מכל מקום באמצעות אפליקציה ייעודית",
            maintenance: "תחזוקה ותמיכה",
            maintenance_desc: "תחזוקה שוטפת ותמיכה טכנית 24/7 למערכות האבטחה",
            recent_projects: "התקנות מעקב אחרונות",
            project1_title: "מערכת אבטחה למשרד",
            project1_desc: "12 מצלמות HD עם מערכת הקלטה מרכזית",
            project2_title: "אבטחה למחסן תעשייתי",
            project2_desc: "כיסוי מלא עם מצלמות חיצוניות ופנימיות",
            project3_title: "מעקב לחנות קמעונאות",
            project3_desc: "מערכת אבטחה חכמה עם זיהוי פנים",
            ready_to_secure: "מוכנים לאבטח את הנכס שלכם?",
            cta_description: "צרו קשר היום להתקנה מקצועית של מערכת מעקב מתקדמת"
        },
        monitoring: {
            title: "מערכות בקרת גישה",
            subtitle: "ניטור ותחזוקה 24/7 של תשתית ה-IT שלכם עם פתרון יזום לבעיות",
            what_we_do: "שירותי בקרת גישה",
            description: "בקרו על הגישה לנכס שלכם עם מערכות בקרת גישה חכמות הכוללות מנעולים דיגיטליים, קוראי כרטיסים וניהול מרחוק",
            features: "התכונות שלנו",
            feature1: "מנעולים חכמים",
            feature2: "קוראי כרטיסים",
            feature3: "ניהול מרחוק",
            feature4: "זיהוי ביומטרי",
            feature5: "רישום כניסות",
            feature6: "בקרת זמנים",
            our_services: "שירותי בקרת הגישה שלנו",
            access_installation: "התקנת מערכות גישה",
            access_installation_desc: "התקנה מקצועית של מנעולים חכמים וקוראי כרטיסים",
            card_systems: "מערכות כרטיסים",
            card_systems_desc: "מערכות קוראי כרטיסים מגנטיים ו-RFID לבקרת גישה מתקדמת",
            mobile_management: "ניהול באפליקציה",
            mobile_management_desc: "בקרה ומעקב אחר כל הכניסות באמצעות אפליקציה ייעודית",
            maintenance: "תחזוקה ותמיכה",
            maintenance_desc: "תחזוקה שוטפת ותמיכה טכנית למערכות בקרת הגישה",
            recent_projects: "התקנות בקרת גישה אחרונות",
            project1_title: "בקרת גישה למשרד",
            project1_desc: "מערכת בקרת גישה עם קוראי כרטיסים לכל הקומות",
            project2_title: "אבטחה למתחם תעשייתי",
            project2_desc: "בקרת גישה רב-שלבית עם זיהוי ביומטרי",
            project3_title: "מערכת גישה למבנה מגורים",
            project3_desc: "מנעולים חכמים עם שליטה באפליקציה",
            ready_to_control: "מוכנים לשלוט בגישה לנכס שלכם?",
            cta_description: "צרו קשר היום להתקנה מקצועית של מערכת בקרת גישה מתקדמת"
        },
        support: {
            title: "תמיכה טכנית ותחזוקה",
            subtitle: "שירותי תמיכה טכנית מומחים ושירותי ייעוץ עם זמני תגובה מהירים ופתרונות מקיפים",
            what_we_do: "שירותי התמיכה שלנו",
            description: "שמרו על המערכות שלכם פועלות בצורה מיטבית עם שירותי התמיכה והתחזוקה המקצועיים שלנו",
            features: "התכונות שלנו",
            feature1: "תמיכה 24/7",
            feature2: "תחזוקה מונעת",
            feature3: "אבחון מרחוק",
            feature4: "עדכוני מערכת",
            feature5: "גיבוי נתונים",
            feature6: "תיקונים מהירים",
            our_services: "שירותי התמיכה שלנו",
            technical_support: "תמיכה טכנית",
            technical_support_desc: "תמיכה טכנית מקצועית זמינה 24/7 לפתרון בעיות מיידי",
            maintenance: "תחזוקה מונעת",
            maintenance_desc: "תחזוקה שוטפת ובדיקות מערכת למניעת תקלות",
            system_updates: "עדכוני מערכת",
            system_updates_desc: "עדכונים שוטפים של תוכנות ומערכות להבטחת ביצועים מיטביים",
            data_backup: "גיבוי נתונים",
            data_backup_desc: "שירותי גיבוי אוטומטיים להגנה על המידע החשוב שלכם",
            recent_projects: "פרויקטי תמיכה ותחזוקה אחרונים",
            project1_title: "תמיכה למערכת משרדית",
            project1_desc: "תחזוקה שוטפת ל-50 עמדות עבודה ושרתים",
            project2_title: "תמיכה למערכת אבטחה",
            project2_desc: "תחזוקה מונעת למערכת מעקב וידאו מתקדמת",
            project3_title: "עדכון מערכת רשת",
            project3_desc: "שדרוג ועדכון מערכת רשת תאגידית מלאה",
            ready_to_maintain: "מוכנים לשמור על המערכות שלכם?",
            cta_description: "צרו קשר היום לשירותי תמיכה ותחזוקה מקצועיים"
        },
        // Add services object for compatibility with main page translations
        services: {
            networking: {
                title: "אינטרנט ורשתות"
            },
            security: {
                title: "מעקבי וידאו"
            },
            monitoring: {
                title: "בקרת גישה"
            },
            support: {
                title: "תחזוקה ותמיכה"
            }
        },
        // Add surveillance translations
        surveillance: {
            recent_projects: "התקנות מעקב אחרונות"
        },
        // Add access control translations  
        access: {
            recent_projects: "התקנות בקרת גישה אחרונות"
        },
        footer: {
            services: "שירותים"
        },
        common: {
            view_project: "צפה בפרויקט",
            get_quote: "קבל הצעת מחיר חינם",
            call_now: "התקשר עכשיו"
        }
    }
};

// Stat Counter functionality
class StatCounter {
    constructor() {
        this.counters = document.querySelectorAll('.counter');
        this.init();
    }

    init() {
        this.observeStats();
    }

    observeStats() {
        const stats = document.querySelectorAll('.stat-number');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    this.animateCounter(entry.target);
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });

        stats.forEach(stat => observer.observe(stat));
    }

    animateCounter(element) {
        const target = element.textContent;
        const isPercentage = target.includes('%');
        const hasPlus = target.includes('+');
        const numericValue = parseFloat(target.replace(/[^\d.]/g, ''));
        
        let current = 0;
        const increment = numericValue / 60; // 60 frames for smooth animation
        const timer = setInterval(() => {
            current += increment;
            if (current >= numericValue) {
                current = numericValue;
                clearInterval(timer);
            }
            
            let displayValue = isPercentage ? 
                current.toFixed(1) + '%' : 
                Math.floor(current) + (hasPlus ? '+' : '');
            
            element.textContent = displayValue;
        }, 1000 / 60); // 60 FPS
    }
}

// Smooth Scroll Enhancement
class SmoothScroll {
    constructor() {
        this.init();
    }

    init() {
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', (e) => {
                e.preventDefault();
                const target = document.querySelector(anchor.getAttribute('href'));
                if (target) {
                    const headerOffset = 80;
                    const elementPosition = target.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                    window.scrollTo({
                        top: offsetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });
    }
}

// Intersection Observer for animations
class AnimationObserver {
    constructor() {
        this.init();
    }

    init() {
        const options = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, options);

        // Observe elements for animation
        const animatedElements = document.querySelectorAll(
            '.service-item, .gallery-item, .timeline-item, .feature'
        );
        
        animatedElements.forEach(el => {
            el.classList.add('fade-in');
            observer.observe(el);
        });
    }
}

// Header scroll effect
class HeaderScroll {
    constructor() {
        this.init();
    }

    init() {
        window.addEventListener('scroll', () => {
            const header = document.querySelector('.header');
            if (header) {
                if (window.scrollY > 100) {
                    header.style.background = 'rgba(15, 20, 25, 0.98)';
                    header.style.backdropFilter = 'blur(15px)';
                } else {
                    header.style.background = 'rgba(15, 20, 25, 0.95)';
                    header.style.backdropFilter = 'blur(10px)';
                }
            }
        });
    }
}

// Mobile Menu Handler
class MobileMenu {
    constructor() {
        this.init();
    }

    init() {
        const hamburger = document.querySelector('.hamburger');
        const navMenu = document.querySelector('.nav-menu');

        if (hamburger && navMenu) {
            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
            });

            // Close menu when clicking on a link
            const navLinks = document.querySelectorAll('.nav-menu a');
            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    hamburger.classList.remove('active');
                    navMenu.classList.remove('active');
                });
            });

            // Close menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!hamburger.contains(e.target) && !navMenu.contains(e.target)) {
                    hamburger.classList.remove('active');
                    navMenu.classList.remove('active');
                }
            });
        }
    }
}

// Service card hover effects
class ServiceCardEffects {
    constructor() {
        this.init();
    }

    init() {
        document.querySelectorAll('.service-item').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-10px) scale(1.02)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });

        document.querySelectorAll('.gallery-item').forEach(item => {
            item.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px) scale(1.02)';
            });
            
            item.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });
    }
}

// Language Switcher Handler
class LanguageSwitcher {
    constructor() {
        this.currentLanguage = 'en';
        this.init();
    }

    init() {
        // Language switcher functionality
        const langButtons = document.querySelectorAll('.lang-btn');
        
        // Debug mode logging
        if (window.location.search.includes('debug=true')) {
            console.log(`Initializing LanguageSwitcher with ${langButtons.length} buttons`);
        }
        
        langButtons.forEach(btn => {
            btn.addEventListener('click', (e) => {
                // Find the actual button element (in case we clicked on span inside)
                const button = e.target.closest('.lang-btn');
                if (!button) return;
                
                // Remove active class from all buttons
                document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
                
                // Add active class to clicked button
                button.classList.add('active');
                
                // Get selected language
                const lang = button.dataset.lang;
                this.currentLanguage = lang;
                
                // Save language preference
                localStorage.setItem('preferred-language', lang);
                
                // Update document language and direction
                document.documentElement.lang = lang;
                document.documentElement.dir = lang === 'he' ? 'rtl' : 'ltr';
                
                // Apply translations if available
                this.applyTranslations(lang);
            });
        });
    }

    applyTranslations(lang) {
        // Update all translated elements
        const elements = document.querySelectorAll('[data-translate]');
        
        let translatedCount = 0;
        elements.forEach(element => {
            const key = element.dataset.translate;
            const translation = this.getTranslation(key, lang);
            if (translation) {
                element.textContent = translation;
                translatedCount++;
            }
        });
        
        // Debug mode logging
        if (window.location.search.includes('debug=true')) {
            console.log(`Language switched to ${lang}: ${translatedCount}/${elements.length} elements translated`);
        }
        
        // Update placeholder texts
        const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
        placeholderElements.forEach(element => {
            const key = element.getAttribute('data-translate-placeholder');
            const translation = this.getTranslation(key, lang);
            if (translation) {
                element.placeholder = translation;
            }
        });
        
        // Update body class for RTL/LTR mode
        document.body.className = lang === 'he' ? 'rtl-mode' : 'ltr-mode';
    }

    getTranslation(key, lang) {
        // Split the key by dots to navigate nested objects
        const keys = key.split('.');
        let value = window.serviceTranslations[lang];
        
        for (const k of keys) {
            if (value && value[k]) {
                value = value[k];
            } else {
                // Only log warnings for missing translations in debug mode
                if (window.location.search.includes('debug=true')) {
                    console.warn(`Translation key not found: ${k} in path ${key}`);
                }
                return null;
            }
        }
        
        return value;
    }
}

// PREMIUM SCROLL ANIMATIONS
class ScrollAnimations {
    constructor() {
        this.animatedElements = [];
        this.init();
    }

    init() {
        this.observeElements();
        this.addStaggeredAnimations();
    }

    observeElements() {
        const options = {
            root: null,
            rootMargin: '-10% 0px -10% 0px',
            threshold: 0.1
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !entry.target.classList.contains('animated')) {
                    const animationClass = entry.target.dataset.animation || 
                                          entry.target.classList.contains('fade-in-up') ? 'fade-in-up' :
                                          entry.target.classList.contains('slide-in-left') ? 'slide-in-left' :
                                          entry.target.classList.contains('slide-in-right') ? 'slide-in-right' :
                                          entry.target.classList.contains('rotate-in') ? 'rotate-in' : 'fade-in-up';

                    this.animateElement(entry.target, animationClass);
                }
            });
        }, options);

        // Observe all animation elements
        const animatedElements = document.querySelectorAll('.fade-in-up, .slide-in-left, .slide-in-right, .rotate-in, .feature, .project-card');
        animatedElements.forEach(el => {
            observer.observe(el);
        });
    }

    animateElement(element, animationClass) {
        element.style.animationDelay = `${Math.random() * 0.3}s`;
        element.classList.add('animated');
        
        // Add enhanced effects for special elements
        if (element.classList.contains('service-icon-large')) {
            element.style.animationDelay = '0.2s';
        } else if (element.tagName === 'H1') {
            element.style.animationDelay = '0.4s';
        } else if (element.tagName === 'P') {
            element.style.animationDelay = '0.6s';
        }
    }

    addStaggeredAnimations() {
        // Stagger feature animations
        const features = document.querySelectorAll('.features-list .feature');
        features.forEach((feature, index) => {
            feature.style.animationDelay = `${0.2 + (index * 0.15)}s`;
        });

        // Stagger project card animations
        const projectCards = document.querySelectorAll('.project-card');
        projectCards.forEach((card, index) => {
            card.style.animationDelay = `${0.1 + (index * 0.1)}s`;
        });
    }
}

// ENHANCED INTERACTIONS
class EnhancedInteractions {
    constructor() {
        this.init();
    }

    init() {
        this.addHoverEffects();
        this.addParallaxEffect();
        this.addMouseFollower();
    }

    addHoverEffects() {
        // Enhanced project card hover effects
        const projectCards = document.querySelectorAll('.project-card');
        projectCards.forEach(card => {
            card.addEventListener('mouseenter', (e) => {
                card.style.transform = 'translateY(-15px) scale(1.02) rotateX(5deg)';
                card.style.transition = 'all 0.5s cubic-bezier(0.4, 0, 0.2, 1)';
            });

            card.addEventListener('mouseleave', (e) => {
                card.style.transform = 'translateY(0) scale(1) rotateX(0deg)';
            });

            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                const rotateX = (y - centerY) / 10;
                const rotateY = (centerX - x) / 10;

                card.style.transform = `translateY(-15px) scale(1.02) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
            });
        });

        // Enhanced feature hover effects
        const features = document.querySelectorAll('.features-list .feature');
        features.forEach(feature => {
            feature.addEventListener('mouseenter', () => {
                feature.querySelector('i').style.transform = 'scale(1.2) rotate(10deg)';
                feature.querySelector('i').style.transition = 'all 0.3s ease';
            });

            feature.addEventListener('mouseleave', () => {
                feature.querySelector('i').style.transform = 'scale(1) rotate(0deg)';
            });
        });
    }

    addParallaxEffect() {
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const backgrounds = document.querySelectorAll('.matrix-grid, .circuit-lines, .data-particles');
            
            backgrounds.forEach((bg, index) => {
                const speed = 0.1 + (index * 0.05);
                bg.style.transform = `translateY(${scrolled * speed}px)`;
            });
        });
    }

    addMouseFollower() {
        const serviceIcons = document.querySelectorAll('.service-icon-large');
        serviceIcons.forEach(icon => {
            icon.addEventListener('mousemove', (e) => {
                const rect = icon.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2;
                const y = e.clientY - rect.top - rect.height / 2;
                
                icon.style.transform = `translate(${x * 0.1}px, ${y * 0.1}px) scale(1.05)`;
            });

            icon.addEventListener('mouseleave', () => {
                icon.style.transform = 'translate(0, 0) scale(1)';
            });
        });
    }
}

// PERFORMANCE OPTIMIZATIONS
class PerformanceOptimizer {
    constructor() {
        this.init();
    }

    init() {
        this.optimizeAnimations();
        this.lazyLoadImages();
    }

    optimizeAnimations() {
        // Reduce animations on lower-end devices
        const isLowEnd = navigator.hardwareConcurrency <= 2 || 
                        /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        if (isLowEnd) {
            document.documentElement.style.setProperty('--animation-duration', '0.3s');
        }
    }

    lazyLoadImages() {
        const images = document.querySelectorAll('img[src]:not(.logo-img)');
        const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.style.opacity = '0';
                    img.style.transition = 'opacity 0.5s ease';
                    
                    img.onload = () => {
                        img.style.opacity = '1';
                    };
                    
                    imageObserver.unobserve(img);
                }
            });
        });

        images.forEach(img => imageObserver.observe(img));
    }
}

// Test function for debugging
window.testLanguageSwitch = function(lang) {
    console.log('=== TESTING LANGUAGE SWITCH ===');
    console.log('Target language:', lang);
    console.log('Available translations:', window.serviceTranslations);
    
    const elements = document.querySelectorAll('[data-translate]');
    console.log('Found elements with data-translate:', elements.length);
    
    elements.forEach((el, index) => {
        console.log(`Element ${index}: key="${el.dataset.translate}" current="${el.textContent}"`);
    });
    
    // Try to switch language manually
    const langSwitcher = new LanguageSwitcher();
    langSwitcher.applyTranslations(lang);
};

// Force Hebrew test function
window.testHebrew = function() {
    console.log('=== FORCING HEBREW ===');
    
    // Update language buttons
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.lang === 'he') {
            btn.classList.add('active');
        }
    });
    
    // Force apply Hebrew translations
    const elements = document.querySelectorAll('[data-translate]');
    console.log(`Found ${elements.length} elements to translate`);
    
    let translated = 0;
    elements.forEach(el => {
        const key = el.dataset.translate;
        const keys = key.split('.');
        let value = window.serviceTranslations.he;
        
        for (const k of keys) {
            if (value && value[k]) {
                value = value[k];
            } else {
                value = null;
                break;
            }
        }
        
        if (value) {
            el.textContent = value;
            translated++;
            console.log(`✅ Translated ${key}: ${value}`);
        } else {
            console.log(`❌ No translation for ${key}`);
        }
    });
    
    // Set RTL
    document.documentElement.dir = 'rtl';
    document.body.className = 'rtl-mode';
    
    console.log(`Translated ${translated}/${elements.length} elements`);
};

// Initialize all components when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    // Initialize all components
    new StatCounter();
    new SmoothScroll();
    new AnimationObserver();
    new HeaderScroll();
    new MobileMenu();
    new ServiceCardEffects();
    
    // Initialize language switcher
    const languageSwitcher = new LanguageSwitcher();
    
    // Check for saved language preference or detect from URL params
    const urlParams = new URLSearchParams(window.location.search);
    const langParam = urlParams.get('lang');
    const savedLang = localStorage.getItem('preferred-language');
    const defaultLang = langParam || savedLang || 'en';
    
    // Set initial language
    if (defaultLang === 'he') {
        const hebrewBtn = document.querySelector('.lang-btn[data-lang="he"]');
        if (hebrewBtn) {
            hebrewBtn.click();
        }
    }

    // Initialize premium enhancements
    new ScrollAnimations();
    new EnhancedInteractions();
    new PerformanceOptimizer();

    console.log('Service page initialized successfully!');
});

// Export for potential use in other scripts
window.ServicePageComponents = {
    StatCounter,
    SmoothScroll,
    AnimationObserver,
    HeaderScroll,
    MobileMenu,
    ServiceCardEffects,
    LanguageSwitcher
}; 