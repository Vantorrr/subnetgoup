// Extended translations for service pages
const serviceTranslations = {
    en: {
        nav: {
            home: "Home",
            about: "About us",
            services: "Services", 
            partners: "Our Partners",
            contact: "Contact us"
        },
        networking: {
            title: "Network Solutions",
            subtitle: "Professional network infrastructure design and implementation for modern businesses",
            networks_installed: "Networks Installed",
            uptime: "Uptime",
            support: "Support",
            what_we_do: "What We Offer",
            description: "SubNet Group specializes in designing and implementing robust network infrastructures that meet the unique needs of your business. Our team of certified network engineers ensures your network is secure, scalable, and optimized for performance.",
            feature1: "Custom Network Design",
            feature2: "Enterprise-grade Equipment",
            feature3: "Scalable Solutions",
            feature4: "24/7 Monitoring",
            feature5: "Security Integration",
            feature6: "Performance Optimization",
            our_services: "Our Network Services",
            design_planning: "Network Design & Planning",
            design_desc: "Comprehensive network architecture design tailored to your business requirements and growth plans.",
            installation: "Installation & Configuration",
            installation_desc: "Professional installation of switches, routers, access points, and network infrastructure.",
            wireless: "Wireless Networks",
            wireless_desc: "Enterprise-grade wireless solutions for seamless connectivity throughout your facility.",
            optimization: "Performance Optimization",
            optimization_desc: "Network performance tuning and optimization to ensure maximum efficiency and speed.",
            security: "Network Security",
            security_desc: "Implementation of firewalls, VPNs, and security protocols to protect your network.",
            maintenance: "Maintenance & Support",
            maintenance_desc: "Ongoing maintenance, monitoring, and support to keep your network running smoothly.",
            recent_projects: "Our Network Projects",
            gallery_subtitle: "Take a look at some of our recent network installations and configurations",
            project1_title: "Corporate Office Network",
            project1_desc: "Complete network infrastructure for 200+ employees",
            project2_title: "Hospital Network System",
            project2_desc: "Critical healthcare network with 99.99% uptime",
            project3_title: "Warehouse WiFi Coverage",
            project3_desc: "Wide-area wireless coverage for logistics operations",
            project4_title: "Educational Network",
            project4_desc: "Secure network for 1000+ students and staff",
            project5_title: "Retail POS Network",
            project5_desc: "High-speed network for point-of-sale systems",
            project6_title: "Manufacturing Network",
            project6_desc: "Industrial-grade network for production facility",
            our_process: "Our Implementation Process",
            step1: "Site Assessment",
            step1_desc: "Thorough analysis of your current infrastructure and business requirements",
            step2: "Design & Planning",
            step2_desc: "Custom network design with detailed implementation plans and timelines",
            step3: "Installation",
            step3_desc: "Professional installation with minimal disruption to your operations",
            step4: "Testing & Optimization",
            step4_desc: "Comprehensive testing and performance optimization",
            step5: "Training & Handover",
            step5_desc: "User training and complete documentation handover",
            step6: "Ongoing Support",
            step6_desc: "24/7 monitoring and support to ensure optimal performance",
            ready_to_upgrade: "Ready to Upgrade Your Network?",
            cta_description: "Contact us today for a free consultation and discover how we can improve your network infrastructure."
        },
        cybersecurity: {
            title: "Cybersecurity Services",
            subtitle: "Comprehensive security solutions to protect your digital assets and ensure business continuity",
            what_we_do: "Security Solutions"
        },
        monitoring: {
            title: "System Monitoring",
            subtitle: "24/7 monitoring and maintenance of your IT infrastructure with proactive issue resolution",
            what_we_do: "Monitoring Services"
        },
        support: {
            title: "Technical Support",
            subtitle: "Expert technical support and consultation services with rapid response times and comprehensive solutions",
            what_we_do: "Support Services"
        },
        footer: {
            services: "Services"
        },
        common: {
            view_project: "View Project",
            get_quote: "Get Free Quote",
            call_now: "Call Now"
        }
    },
    he: {
        nav: {
            home: "בית",
            about: "אודותינו",
            services: "שירותים",
            partners: "השותפים שלנו", 
            contact: "צור קשר"
        },
        networking: {
            title: "פתרונות רשת",
            subtitle: "עיצוב והטמעה מקצועית של תשתית רשת לעסקים מודרניים",
            networks_installed: "רשתות שהותקנו",
            uptime: "זמן פעילות",
            support: "תמיכה",
            what_we_do: "מה אנחנו מציעים",
            description: "SubNet Group מתמחה בעיצוב והטמעה של תשתיות רשת חזקות העונות על הצרכים הייחודיים של העסק שלכם. צוות מהנדסי הרשת המוסמכים שלנו מבטיח שהרשת שלכם תהיה מאובטחת, ניתנת להרחבה ומותאמת לביצועים.",
            feature1: "עיצוב רשת מותאם אישית",
            feature2: "ציוד ברמה עסקית",
            feature3: "פתרונות ניתנים להרחבה",
            feature4: "ניטור 24/7",
            feature5: "אינטגרציית אבטחה",
            feature6: "אופטימיזציית ביצועים",
            our_services: "שירותי הרשת שלנו",
            design_planning: "עיצוב ותכנון רשת",
            design_desc: "עיצוב מקיף של ארכיטקטורת רשת המותאם לדרישות ותוכניות הצמיחה של העסק שלכם.",
            installation: "התקנה ותצורה",
            installation_desc: "התקנה מקצועית של מתגים, נתבים, נקודות גישה ותשתית רשת.",
            wireless: "רשתות אלחוטיות",
            wireless_desc: "פתרונות אלחוטיים ברמה עסקית לקישוריות חלקה בכל המתקן שלכם.",
            optimization: "אופטימיזציית ביצועים",
            optimization_desc: "כוונון ואופטימיזציה של ביצועי הרשת להבטחת יעילות ומהירות מקסימלית.",
            security: "אבטחת רשת",
            security_desc: "הטמעת חומות אש, VPN ופרוטוקולי אבטחה להגנה על הרשת שלכם.",
            maintenance: "תחזוקה ותמיכה",
            maintenance_desc: "תחזוקה מתמשכת, ניטור ותמיכה כדי לשמור על הרשת שלכם פועלת בחלקות.",
            recent_projects: "פרויקטי הרשת שלנו",
            gallery_subtitle: "הציצו לכמה מההתקנות והתצורות הרשת האחרונות שלנו",
            project1_title: "רשת משרד תאגידי",
            project1_desc: "תשתית רשת מלאה לכ-200 עובדים",
            project2_title: "מערכת רשת בית חולים",
            project2_desc: "רשת קריטית לשירותי בריאות עם 99.99% זמן פעילות",
            project3_title: "כיסוי WiFi למחסן",
            project3_desc: "כיסוי אלחוטי לאזור נרחב לפעולות לוגיסטיות",
            project4_title: "רשת חינוכית",
            project4_desc: "רשת מאובטחת לכ-1000 תלמידים וצוות",
            project5_title: "רשת קמעונאית לנקודות מכירה",
            project5_desc: "רשת מהירה למערכות נקודות מכירה",
            project6_title: "רשת ייצור",
            project6_desc: "רשת ברמה תעשייתית למתקן ייצור",
            our_process: "תהליך היישום שלנו",
            step1: "הערכת אתר",
            step1_desc: "ניתוח מקיף של התשתית הנוכחית והדרישות העסקיות שלכם",
            step2: "עיצוב ותכנון",
            step2_desc: "עיצוב רשת מותאם אישית עם תוכניות יישום מפורטות ולוחות זמנים",
            step3: "התקנה",
            step3_desc: "התקנה מקצועית עם הפרעה מינימלית לפעילות שלכם",
            step4: "בדיקות ואופטימיזציה",
            step4_desc: "בדיקות מקיפות ואופטימיזציית ביצועים",
            step5: "הדרכה והעברה",
            step5_desc: "הדרכת משתמשים והעברה מלאה של תיעוד",
            step6: "תמיכה מתמשכת",
            step6_desc: "ניטור ותמיכה 24/7 להבטחת ביצועים אופטימליים",
            ready_to_upgrade: "מוכנים לשדרג את הרשת שלכם?",
            cta_description: "צרו קשר היום ליעוץ חינם וגלו איך אנחנו יכולים לשפר את תשתית הרשת שלכם."
        },
        cybersecurity: {
            title: "שירותי אבטחת סייבר",
            subtitle: "פתרונות אבטחה מקיפים להגנה על הנכסים הדיגיטליים שלכם ולהבטחת רציפות עסקית",
            what_we_do: "פתרונות אבטחה"
        },
        monitoring: {
            title: "ניטור מערכות",
            subtitle: "ניטור ותחזוקה 24/7 של תשתית ה-IT שלכם עם פתרון יזום לבעיות",
            what_we_do: "שירותי ניטור"
        },
        support: {
            title: "תמיכה טכנית",
            subtitle: "שירותי תמיכה טכנית מומחים ושירותי ייעוץ עם זמני תגובה מהירים ופתרונות מקיפים",
            what_we_do: "שירותי תמיכה"
        },
        footer: {
            services: "שירותים"
        },
        common: {
            view_project: "צפה בפרויקט",
            get_quote: "קבל הצעת מחיר חינם",
            call_now: "התקשר עכשיו"
        }
    }
};

// Stat Counter functionality
class StatCounter {
    constructor() {
        this.counters = document.querySelectorAll('.counter');
        this.init();
    }

    init() {
        this.observeStats();
    }

    observeStats() {
        const stats = document.querySelectorAll('.stat-number');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    this.animateCounter(entry.target);
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });

        stats.forEach(stat => observer.observe(stat));
    }

    animateCounter(element) {
        const target = element.textContent;
        const isPercentage = target.includes('%');
        const hasPlus = target.includes('+');
        const numericValue = parseFloat(target.replace(/[^\d.]/g, ''));
        
        let current = 0;
        const increment = numericValue / 60; // 60 frames for smooth animation
        const timer = setInterval(() => {
            current += increment;
            if (current >= numericValue) {
                current = numericValue;
                clearInterval(timer);
            }
            
            let displayValue = isPercentage ? 
                current.toFixed(1) + '%' : 
                Math.floor(current) + (hasPlus ? '+' : '');
            
            element.textContent = displayValue;
        }, 1000 / 60); // 60 FPS
    }
}

// Smooth Scroll Enhancement
class SmoothScroll {
    constructor() {
        this.init();
    }

    init() {
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', (e) => {
                e.preventDefault();
                const target = document.querySelector(anchor.getAttribute('href'));
                if (target) {
                    const headerOffset = 80;
                    const elementPosition = target.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                    window.scrollTo({
                        top: offsetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });
    }
}

// Intersection Observer for animations
class AnimationObserver {
    constructor() {
        this.init();
    }

    init() {
        const options = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, options);

        // Observe elements for animation
        const animatedElements = document.querySelectorAll(
            '.service-item, .gallery-item, .timeline-item, .feature'
        );
        
        animatedElements.forEach(el => {
            el.classList.add('fade-in');
            observer.observe(el);
        });
    }
}

// Header scroll effect
class HeaderScroll {
    constructor() {
        this.init();
    }

    init() {
        window.addEventListener('scroll', () => {
            const header = document.querySelector('.header');
            if (header) {
                if (window.scrollY > 100) {
                    header.style.background = 'rgba(15, 20, 25, 0.98)';
                    header.style.backdropFilter = 'blur(15px)';
                } else {
                    header.style.background = 'rgba(15, 20, 25, 0.95)';
                    header.style.backdropFilter = 'blur(10px)';
                }
            }
        });
    }
}

// Mobile Menu Handler
class MobileMenu {
    constructor() {
        this.init();
    }

    init() {
        const hamburger = document.querySelector('.hamburger');
        const navMenu = document.querySelector('.nav-menu');

        if (hamburger && navMenu) {
            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
            });

            // Close menu when clicking on a link
            const navLinks = document.querySelectorAll('.nav-menu a');
            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    hamburger.classList.remove('active');
                    navMenu.classList.remove('active');
                });
            });

            // Close menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!hamburger.contains(e.target) && !navMenu.contains(e.target)) {
                    hamburger.classList.remove('active');
                    navMenu.classList.remove('active');
                }
            });
        }
    }
}

// Service card hover effects
class ServiceCardEffects {
    constructor() {
        this.init();
    }

    init() {
        document.querySelectorAll('.service-item').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-10px) scale(1.02)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });

        document.querySelectorAll('.gallery-item').forEach(item => {
            item.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px) scale(1.02)';
            });
            
            item.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });
    }
}

// Language Switcher Handler
class LanguageSwitcher {
    constructor() {
        this.currentLanguage = 'en';
        this.init();
    }

    init() {
        // Language switcher functionality
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                // Remove active class from all buttons
                document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
                
                // Add active class to clicked button
                e.target.classList.add('active');
                
                // Get selected language
                const lang = e.target.dataset.lang;
                this.currentLanguage = lang;
                
                // Update document language and direction
                document.documentElement.lang = lang;
                document.documentElement.dir = lang === 'he' ? 'rtl' : 'ltr';
                
                // Apply translations if available
                this.applyTranslations(lang);
                
                console.log(`Language switched to: ${lang}`);
            });
        });
    }

    applyTranslations(lang) {
        const elements = document.querySelectorAll('[data-translate]');
        elements.forEach(element => {
            const key = element.dataset.translate;
            const translation = this.getTranslation(key, lang);
            if (translation) {
                element.textContent = translation;
            }
        });
    }

    getTranslation(key, lang) {
        // Split the key by dots to navigate nested objects
        const keys = key.split('.');
        let value = serviceTranslations[lang];
        
        for (const k of keys) {
            if (value && value[k]) {
                value = value[k];
            } else {
                return null;
            }
        }
        
        return value;
    }
}

// PREMIUM SCROLL ANIMATIONS
class ScrollAnimations {
    constructor() {
        this.animatedElements = [];
        this.init();
    }

    init() {
        this.observeElements();
        this.addStaggeredAnimations();
    }

    observeElements() {
        const options = {
            root: null,
            rootMargin: '-10% 0px -10% 0px',
            threshold: 0.1
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !entry.target.classList.contains('animated')) {
                    const animationClass = entry.target.dataset.animation || 
                                          entry.target.classList.contains('fade-in-up') ? 'fade-in-up' :
                                          entry.target.classList.contains('slide-in-left') ? 'slide-in-left' :
                                          entry.target.classList.contains('slide-in-right') ? 'slide-in-right' :
                                          entry.target.classList.contains('rotate-in') ? 'rotate-in' : 'fade-in-up';

                    this.animateElement(entry.target, animationClass);
                }
            });
        }, options);

        // Observe all animation elements
        const animatedElements = document.querySelectorAll('.fade-in-up, .slide-in-left, .slide-in-right, .rotate-in, .feature, .project-card');
        animatedElements.forEach(el => {
            observer.observe(el);
        });
    }

    animateElement(element, animationClass) {
        element.style.animationDelay = `${Math.random() * 0.3}s`;
        element.classList.add('animated');
        
        // Add enhanced effects for special elements
        if (element.classList.contains('service-icon-large')) {
            element.style.animationDelay = '0.2s';
        } else if (element.tagName === 'H1') {
            element.style.animationDelay = '0.4s';
        } else if (element.tagName === 'P') {
            element.style.animationDelay = '0.6s';
        }
    }

    addStaggeredAnimations() {
        // Stagger feature animations
        const features = document.querySelectorAll('.features-list .feature');
        features.forEach((feature, index) => {
            feature.style.animationDelay = `${0.2 + (index * 0.15)}s`;
        });

        // Stagger project card animations
        const projectCards = document.querySelectorAll('.project-card');
        projectCards.forEach((card, index) => {
            card.style.animationDelay = `${0.1 + (index * 0.1)}s`;
        });
    }
}

// ENHANCED INTERACTIONS
class EnhancedInteractions {
    constructor() {
        this.init();
    }

    init() {
        this.addHoverEffects();
        this.addParallaxEffect();
        this.addMouseFollower();
    }

    addHoverEffects() {
        // Enhanced project card hover effects
        const projectCards = document.querySelectorAll('.project-card');
        projectCards.forEach(card => {
            card.addEventListener('mouseenter', (e) => {
                card.style.transform = 'translateY(-15px) scale(1.02) rotateX(5deg)';
                card.style.transition = 'all 0.5s cubic-bezier(0.4, 0, 0.2, 1)';
            });

            card.addEventListener('mouseleave', (e) => {
                card.style.transform = 'translateY(0) scale(1) rotateX(0deg)';
            });

            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                const rotateX = (y - centerY) / 10;
                const rotateY = (centerX - x) / 10;

                card.style.transform = `translateY(-15px) scale(1.02) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
            });
        });

        // Enhanced feature hover effects
        const features = document.querySelectorAll('.features-list .feature');
        features.forEach(feature => {
            feature.addEventListener('mouseenter', () => {
                feature.querySelector('i').style.transform = 'scale(1.2) rotate(10deg)';
                feature.querySelector('i').style.transition = 'all 0.3s ease';
            });

            feature.addEventListener('mouseleave', () => {
                feature.querySelector('i').style.transform = 'scale(1) rotate(0deg)';
            });
        });
    }

    addParallaxEffect() {
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const backgrounds = document.querySelectorAll('.matrix-grid, .circuit-lines, .data-particles');
            
            backgrounds.forEach((bg, index) => {
                const speed = 0.1 + (index * 0.05);
                bg.style.transform = `translateY(${scrolled * speed}px)`;
            });
        });
    }

    addMouseFollower() {
        const serviceIcons = document.querySelectorAll('.service-icon-large');
        serviceIcons.forEach(icon => {
            icon.addEventListener('mousemove', (e) => {
                const rect = icon.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2;
                const y = e.clientY - rect.top - rect.height / 2;
                
                icon.style.transform = `translate(${x * 0.1}px, ${y * 0.1}px) scale(1.05)`;
            });

            icon.addEventListener('mouseleave', () => {
                icon.style.transform = 'translate(0, 0) scale(1)';
            });
        });
    }
}

// PERFORMANCE OPTIMIZATIONS
class PerformanceOptimizer {
    constructor() {
        this.init();
    }

    init() {
        this.optimizeAnimations();
        this.lazyLoadImages();
    }

    optimizeAnimations() {
        // Reduce animations on lower-end devices
        const isLowEnd = navigator.hardwareConcurrency <= 2 || 
                        /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        if (isLowEnd) {
            document.documentElement.style.setProperty('--animation-duration', '0.3s');
        }
    }

    lazyLoadImages() {
        const images = document.querySelectorAll('img[src]');
        const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.style.opacity = '0';
                    img.style.transition = 'opacity 0.5s ease';
                    
                    img.onload = () => {
                        img.style.opacity = '1';
                    };
                    
                    imageObserver.unobserve(img);
                }
            });
        });

        images.forEach(img => imageObserver.observe(img));
    }
}

// Initialize all components when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    // Initialize all components
    new StatCounter();
    new SmoothScroll();
    new AnimationObserver();
    new HeaderScroll();
    new MobileMenu();
    new ServiceCardEffects();
    new LanguageSwitcher();

    // Initialize premium enhancements
    new ScrollAnimations();
    new EnhancedInteractions();
    new PerformanceOptimizer();

    console.log('Service page initialized successfully!');
});

// Export for potential use in other scripts
window.ServicePageComponents = {
    StatCounter,
    SmoothScroll,
    AnimationObserver,
    HeaderScroll,
    MobileMenu,
    ServiceCardEffects,
    LanguageSwitcher
}; 